MISC_INC = /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/c++/v1
HELPERS_INC = ../../helpers
FFTW_INC = ../../fftw/fftw-3.3.4/api/
OBJ_DIR=.
FFTW_OBJ = ../../lib/osx/
TARGET_DIR=.
MYCXX = clang2++
LINK = clang2++
CXXFLAGS = -g -c -I. -I$(MISC_INC) -I$(HELPERS_INC) -I$(FFTW_INC) -fPIC -m64 -msse
LDFLAGS = -fopenmp -L/usr/lib -L$(OBJ_DIR) -L$(FFTW_OBJ) -lfftw3f -lfftw3f_omp -lfftw3f_threads -shared

OBJS = $(OBJ_DIR)/aaOceanClass.o
TARGET = $(TARGET_DIR)/aaOcean.a

all: $(TARGET)

$(OBJ_DIR):
	mkdir $@

.PRECIOUS :$(OBJ_DIR)/%.o 
$(OBJ_DIR)/%.o: $(SRC_DIR)/%.cpp
	$(MYCXX) $(CXXFLAGS) -c $< -o $@

$(TARGET): $(OBJ_DIR) $(OBJS)
	$(LINK) -o $@ $(OBJS) $(LDFLAGS)

clean:
	rm aaOcean.a
	rm aaOceanClass.o

